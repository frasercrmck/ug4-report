\chapter{Conclusion and Future Work}
\label{chap:conclusion}

The report thus far has detailed the LLVM front-end for the Dalvik executable format. In its current state, Dalvik executable files are able to be read by the custom-build parser and translated by the code generator into LLVM bytecode, at which point they are able to be run just-in-time on the LLVM JIT compiler. The resulting bytecode is additionally able to be analysed and further transformed by LLVM's optimisation passes. In this sense, the goals of the project have been accomplished. The primary limitation of the current compiler prototype is that some language features are still not yet supported, such as exceptions, switch statements, and arrays of objects.

\subsection*{Future Work}

The LLVM-based JIT compiler for the Dalvik virtual machine as presented in this report leaves a wide scope for future work in the area. The remaining instructions left unsupported by this initial prototype must be finished in order to successfully translate whichever Dalvik executable format is presented as input. As described in Section \ref{sec:javalib}, the capability of this compiler depends largely on the quality and scope of its custom-built Java library. The Java library module currently lacks LLVM translations for Java's \verb|ArrayList|s and \verb|HashMap|s, for example. Without support for this functionality, which is so ubiquitous in Java programming, the LLVM front-end lacks the power to compile everyday user applications, hindering its ability to be applied to real-world scenarios.

Once support for the entire Dalvik instruction set is present, along with support for more standard Java library classes and functions, focus could shift to replacing the current Dalvik JIT compiler with an LLVM-based one. This way, Dalvik programs could be run just-in-time on actual Android devices. However, without adequate performance there is not such a market for this ability. That is where more aggressive and language-specific optimisations come into play. Future work could investigate and design such optimisation passes for Dalvik executables on LLVM and their effect on the JIT performance.
