\section{Analysis}
\label{sec:analysis}

As the results of the evaluation show, the Java benchmarks repeatedly perform better than the LLVM version as translated by our compiler. This behaviour is to be expected, however. The JVM features a mature and highly-optimised just-in-time compiler, one which the relatively young LLVM JIT compiler finds it hard to match. In addition, this iteration of our Dalvik compiler is generating code relatively na\"{\i}vely, taking instructions from Dalvik bytecode and translating them one-for-one with appropriate LLVM instructions. Without any knowledge of language-specific features of the Dalvik instruction set, peak performance can not be achieved. There is a large scope for optimisations.

For example, if a program contains any form of guarded expression, and it is possible to statically work out the value of the guard, there is the possibility of eliminating the calculation of the guard from the generated code. This is an example of a compiler optimisation that requires knowledge of the specific language and that is not generic.

There are additional optimisations that, if introduced, would help the performance of the generated LLVM bytecode. For instance, just-in-time compilers often generate trace-specific code, i.e., code that may only work for one particular type of value encountered during profiling. If at a later stage in the program another type occurs, the JIT may fall back to interpretive execution and/or modify previously-generated code.

In summary, the maturity of the Java JIT compiler and the wealth of optimisations it possesses means outperforming it using another JIT compiler is a challenging task. The benchmarks run in this report fail to match the sophistication necessary for LLVM's aggressive optimisations to kick in effectively. With the aid of these, the gap in performance might further decrease. Despite this, our compiler has shown promising results for the case of an LLVM-based JIT compiler for the Dalvik virtual machine, especially for such an early prototype.
